# 開発ロードマップ

## プロジェクトビジョン

小河内ダムに沈んだ村の記憶を次世代に伝える、イマーシブな3Dビューアプリケーションを開発・リリースする。

## ステップ概要

### Step 1: 環境構築・基盤開発
技術基盤の確立とReact Three Fiberベースの開発環境構築

### Step 2: コア3D機能開発
センサー連携とデバイス方位対応3Dビューの実装

### Step 3: インタラクション・UI開発
建物選択、詳細表示、地図モードなどのユーザー体験実装

### Step 4: コンテンツ統合・最適化
3Dモデル、ストーリーデータの統合とパフォーマンス最適化

## 詳細タスク

### Step 1: 環境構築・基盤開発

#### プロジェクト初期化
- [ ] Vite + React + TypeScript プロジェクト作成
- [ ] pnpm ワークスペース設定
- [ ] ESLint/Prettier/Biome 設定
- [ ] GitHub Actions CI/CD 設定

#### React Three Fiber セットアップ
- [ ] @react-three/fiber インストール・設定
- [ ] @react-three/drei インストール・設定
- [ ] 基本的な3Dシーン作成
- [ ] WebGPU/WebGL2 自動選択機能

#### 状態管理・型定義
- [ ] Zustand ストア設計・実装
- [ ] アプリケーション全体の型定義
- [ ] データ仕様に基づくインターfaces作成
- [ ] Zod スキーマ検証設定

#### 開発ツール設定
- [ ] ローカルHTTPS開発サーバー設定
- [ ] モバイルデバッグ環境構築
- [ ] Vitest ユニットテスト環境
- [ ] Playwright E2Eテスト環境

### Step 2: コア3D機能開発

#### センサー統合
- [ ] LocationService クラス実装（GPS）
- [ ] OrientationService クラス実装（ジャイロ）
- [ ] MotionService クラス実装（加速度）
- [ ] センサー許可要求UI実装

#### 座標変換システム
- [ ] CoordinateTransformer クラス実装
- [ ] GPS座標→3D座標変換
- [ ] デバイス方位→カメラ回転変換
- [ ] 磁気偏角補正実装

#### 3Dシーン基盤
- [ ] React Three FiberのCanvas設定
- [ ] 基本ライティング設定
- [ ] 環境マップ・背景設定
- [ ] カメラコントローラー実装

#### デバイス連動カメラ
- [ ] useDeviceOrientationControls フック
- [ ] スムーズなカメラ回転実装
- [ ] 1人称視点モード実装
- [ ] フォールバック（手動操作）モード

### Step 3: インタラクション・UI開発

#### 3Dオブジェクト管理
- [ ] glTFモデルローダー実装
- [ ] BuildingRenderer クラス実装
- [ ] LODシステム実装
- [ ] インスタンス化による最適化

#### インタラクション
- [ ] レイキャスティングによるオブジェクト選択
- [ ] 建物ハイライト表示
- [ ] 建物詳細情報UI実装
- [ ] ジェスチャー操作対応

#### UI コンポーネント
- [ ] メインメニュー実装
- [ ] 設定画面実装
- [ ] ローディング画面実装
- [ ] エラー画面実装

#### 表示モード切り替え
- [ ] イマーシブ3Dビューモード
- [ ] エクスプローラーモード（自由操作）
- [ ] 地図ビューモード（2D）
- [ ] モード切り替えUI実装

### Step 4: コンテンツ統合・最適化

#### データローディング
- [ ] AssetLoader クラス実装
- [ ] プログレッシブローディング
- [ ] GeoJSONデータパーサー
- [ ] ストーリーデータローダー

#### パフォーマンス最適化
- [ ] GPU Instancing実装
- [ ] フラスタムカリング最適化
- [ ] テクスチャ圧縮（KTX2）対応
- [ ] メモリ管理・リソース解放

#### オフライン対応
- [ ] Service Worker実装
- [ ] データキャッシュ戦略
- [ ] プログレッシブWeb App化
- [ ] オフライン検知・UI対応

#### 品質保証
- [ ] エラーハンドリング強化
- [ ] パフォーマンステスト
- [ ] アクセシビリティ対応
- [ ] ブラウザ互換性テスト

## マイルストーン

| ステップ | マイルストーン | 成果物 |
|---------|--------------|--------|
| Step 1 | M1: 基盤完成 | React Three Fiber 動作環境 |
| Step 2 | M2: 3D機能完成 | センサー連動3Dビュー |
| Step 3 | M3: インタラクション完成 | フル機能UI搭載アプリ |
| Step 4 | M4: 最適化・リリース | 本格運用可能アプリ |

## リソース計画

### 開発チーム
- プロジェクトリード: 1名
- フロントエンド開発: 2名
- 3Dアーティスト: 2名
- UI/UXデザイナー: 1名
- データリサーチャー: 1名

### 協力者
- 歴史研究者
- 地元住民・語り部
- 奥多摩町教育委員会
- 東京都水道局

## リスク管理

### 技術リスク
| リスク | 影響 | 対策 |
|-------|------|------|
| WebGPU未対応デバイス | 中 | WebGL2フォールバック |
| GPS精度不足 | 中 | 手動位置補正機能 |
| 3D描画性能 | 中 | 動的品質調整・LOD |

### コンテンツリスク
| リスク | 影響 | 対策 |
|-------|------|------|
| 資料不足 | 高 | 推定復元の併用 |
| 権利処理 | 中 | 早期確認と代替案 |
| 翻訳品質 | 低 | ネイティブチェック |

## 成功指標 (KPI)

### 技術指標
- ページロード時間: < 3秒
- 3D表示フレームレート: > 30fps
- 位置精度: < 5m

### ユーザー指標
- 月間アクティブユーザー: 1,000人
- 平均滞在時間: > 10分
- ユーザー満足度: > 4.0/5.0

### コンテンツ指標
- 3Dモデル数: > 30棟
- ストーリー数: > 20話
- 写真アーカイブ: > 100枚

## 将来の拡張計画

### Version 2.0 (2026年)
- VRモード対応
- 時系列アニメーション
- ソーシャル機能

### Version 3.0 (2027年)
- 他のダム湖への展開
- 教育プログラム連携
- API公開

## 予算概算

### 開発費用
- 人件費: 約1,200万円
- インフラ: 約50万円
- ツール・ライセンス: 約30万円

### コンテンツ制作
- 3Dモデリング: 約300万円
- 音声収録: 約100万円
- 翻訳: 約50万円

### その他
- プロモーション: 約100万円
- 予備費: 約200万円

**合計: 約2,030万円**

## コミュニケーション計画

### 定例会議
- 週次進捗会議（毎週月曜日）
- 月次ステアリング会議
- 四半期レビュー

### 情報共有
- GitHubプロジェクトボード
- Slack/Discord
- 月次ニュースレター

## 品質保証

### コードレビュー
- プルリクエスト必須
- 2名以上の承認
- 自動テスト通過

### テスト計画
- ユニットテスト: カバレッジ80%以上
- 統合テスト: 主要シナリオ網羅
- ユーザビリティテスト: 各フェーズ実施

## まとめ

このロードマップは、技術的な実現可能性と地域貢献のバランスを考慮して策定されています。定期的な見直しと調整を行いながら、プロジェクトの成功に向けて着実に進めていきます。